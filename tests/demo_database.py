#!/usr/bin/env python3
"""
–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –±–æ—Ç–µ
–ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –∫–∞–∫ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
"""

import asyncio
from database import db

async def demo():
    """–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"""
    print("üé∞ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∫–∞–∑–∏–Ω–æ-–±–æ—Ç–∞")
    print("=" * 50)
    
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
    await db.init_db()
    print("‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞")
    
    # –°–∏–º—É–ª–∏—Ä—É–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    users_data = [
        (111111111, "alice_player", "–ê–ª–∏—Å–∞"),
        (222222222, "bob_gambler", "–ë–æ–±"),
        (333333333, "charlie_lucky", "–ß–∞—Ä–ª–∏"),
        (444444444, "diana_winner", "–î–∏–∞–Ω–∞"),
        (555555555, "eve_casino", "–ï–≤–∞")
    ]
    
    print("\nüë• –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...")
    for user_id, username, first_name in users_data:
        user = await db.get_or_create_user(user_id, username, first_name)
        print(f"   ‚úÖ {first_name} (@{username}) - –±–∞–ª–∞–Ω—Å: {user['balance']} ‚≠ê")
    
    # –°–∏–º—É–ª–∏—Ä—É–µ–º –∏–≥—Ä–æ–≤—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
    print("\nüé≤ –°–∏–º—É–ª–∏—Ä—É–µ–º –∏–≥—Ä–æ–≤—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å...")
    
    # –ê–ª–∏—Å–∞ –≤—ã–∏–≥—Ä–∞–ª–∞ –¥–∂–µ–∫–ø–æ—Ç
    await db.update_balance(111111111, 3000)
    await db.record_bet(111111111, 200, 2000)
    print("   üéâ –ê–ª–∏—Å–∞ –≤—ã–∏–≥—Ä–∞–ª–∞ –¥–∂–µ–∫–ø–æ—Ç! +2000 ‚≠ê")
    
    # –ë–æ–± –ø—Ä–æ–∏–≥—Ä–∞–ª –Ω–µ–º–Ω–æ–≥–æ
    await db.update_balance(222222222, 600)
    await db.record_bet(222222222, 400, 0)
    print("   üòî –ë–æ–± –ø—Ä–æ–∏–≥—Ä–∞–ª 400 ‚≠ê")
    
    # –ß–∞—Ä–ª–∏ –∏–≥—Ä–∞–ª –∞–∫—Ç–∏–≤–Ω–æ
    await db.update_balance(333333333, 1500)
    await db.record_bet(333333333, 200, 400)
    await db.record_bet(333333333, 300, 600)
    print("   üéØ –ß–∞—Ä–ª–∏ —Å–¥–µ–ª–∞–ª –Ω–µ—Å–∫–æ–ª—å–∫–æ —É–¥–∞—á–Ω—ã—Ö —Å—Ç–∞–≤–æ–∫")
    
    # –î–∏–∞–Ω–∞ –Ω–µ–º–Ω–æ–≥–æ –≤—ã–∏–≥—Ä–∞–ª–∞
    await db.update_balance(444444444, 1200)
    await db.record_bet(444444444, 200, 400)
    print("   üíé –î–∏–∞–Ω–∞ –≤—ã–∏–≥—Ä–∞–ª–∞ 200 ‚≠ê")
    
    # –ï–≤–∞ —Ç–æ–ª—å–∫–æ –Ω–∞—á–∞–ª–∞ –∏–≥—Ä–∞—Ç—å
    await db.record_bet(555555555, 100, 100)
    print("   üÜï –ï–≤–∞ —Å–¥–µ–ª–∞–ª–∞ –ø–µ—Ä–≤—É—é —Å—Ç–∞–≤–∫—É")
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ø –∏–≥—Ä–æ–∫–æ–≤
    print("\nüèÜ –¢–æ–ø-5 –∏–≥—Ä–æ–∫–æ–≤ –ø–æ –±–∞–ª–∞–Ω—Å—É:")
    top_users = await db.get_top_users(5)
    for i, user in enumerate(top_users, 1):
        emoji = ["ü•á", "ü•à", "ü•â", "4Ô∏è‚É£", "5Ô∏è‚É£"][i-1]
        profit = user['total_wins'] - user['total_bets']
        profit_text = f"+{profit}" if profit > 0 else str(profit)
        print(f"   {emoji} {user['first_name']} - {user['balance']} ‚≠ê (–ø—Ä–∏–±—ã–ª—å: {profit_text})")
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–µ—Ç–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ê–ª–∏—Å—ã
    print(f"\nüìä –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ê–ª–∏—Å—ã:")
    stats = await db.get_user_stats(111111111)
    if stats:
        print(f"   üí∞ –ë–∞–ª–∞–Ω—Å: {stats['balance']} ‚≠ê")
        print(f"   üéØ –í—Å–µ–≥–æ —Å—Ç–∞–≤–æ–∫: {stats['total_bets']} ‚≠ê")
        print(f"   üèÜ –í—Å–µ–≥–æ –≤—ã–∏–≥—Ä—ã—à–µ–π: {stats['total_wins']} ‚≠ê")
        print(f"   üìà –ü—Ä–∏–±—ã–ª—å: {stats['profit']} ‚≠ê")
        print(f"   üìÖ –ò–≥—Ä–∞–µ—Ç —Å: {stats['created_at'][:10]}")
    
    print(f"\nüóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ —Ñ–∞–π–ª: users.db")
    print("   –î–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞–Ω—É—Ç—Å—è –¥–∞–∂–µ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞!")
    print("\n‚úÖ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!")

if __name__ == "__main__":
    asyncio.run(demo())